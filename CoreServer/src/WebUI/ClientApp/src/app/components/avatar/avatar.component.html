<div class="h-full w-full aspect-square relative" *ngIf="user">
  <div class="status h-full aspect-square absolute"
       [class.bg-warning]="user.onlineStatus===OnlineStatus.Away"
       [class.bg-success]="user.onlineStatus===OnlineStatus.Online"
       [class.bg-text]="user.onlineStatus===OnlineStatus.Offline"
       [class.bg-danger]="user.onlineStatus===OnlineStatus.Busy"></div>
  <img *ngIf="avatarUrl" [alt]="user.userName" [src]="avatarUrl|secure|async" class="mask rounded-full h-full w-full aspect-square break-words"/>
  <div *ngIf="!avatarUrl" class="mask rounded-full h-full w-full aspect-square flex justify-center  items-center" [style]="'background-color:'+avatarColor" >
    <span class="text-black font-bold">{{avatarText}}</span>
  </div>
  <button *ngIf="allowEdit" class="absolute top-0 right-0 text-white w-1/2 h-1/2" (click)="fileInput.click();$event.preventDefault()">
    <svg class="w-full h-full drop-shadow-lg" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M19.3635 5.63645C17.8703 4.14328 15.515 4.14328 14.0218 5.63645L5.63646 14.0218C5.20621 14.452 4.90512 14.951 4.76877 15.4953L3.15711 20.3429C3.10066 20.5592 3.10066 20.7859 3.15711 21.0022C3.29912 21.5658 3.74638 21.9984 4.2944 22H4.2944C4.51075 21.9968 4.72695 21.9454 4.9328 21.8462L9.78048 20.2345C10.3248 20.0981 10.8238 19.797 11.254 19.3668L19.6384 10.9825C21.1316 9.48935 21.1316 7.13405 19.6384 5.64088L19.3635 5.63645ZM8.61823 16.3817L6.03251 17.9674L7.61823 15.3817L8.61823 16.3817ZM17.1841 7.81589L9.85786 15.1421L7.61823 15.3817L7.85786 13.1421L15.1841 5.81588L17.1841 7.81589Z" fill="currentColor"/>
    </svg>
  </button>
</div>
<input type="file" (change)="onFileSelected($event)" accept="image/*" class="hidden" #fileInput/>
